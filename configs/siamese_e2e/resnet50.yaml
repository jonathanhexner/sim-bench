# End-to-End ResNet50 Siamese Network Training
# Fine-tunes entire ResNet50 CNN backbone + MLP head

name: "siamese_e2e_resnet50"

data:
  root_dir: "D:\\Similar Images\\automatic_triage_photo_series"
  min_agreement: 0.7
  min_reviewers: 2
  split_mode: "series_based"
  quick_experiment: null  # Set to 0.1 for 10% of data

model:
  # Siamese CNN + MLP configuration
  cnn_backbone: "resnet50"
  pretrained: true
  use_paper_preprocessing: false  # Standard ResNet preprocessing
  
  # MLP head architecture
  mlp_hidden_dims: [256, 128]
  dropout: 0.3
  activation: "relu"

training:
  batch_size: 8  # Match reference implementation
  learning_rate: 0.00001  # Base LR for backbone (1e-5), head gets 10x (1e-4)
  differential_lr: true  # Use 1x LR for backbone, 10x for head
  optimizer: "sgd"
  momentum: 0.9
  weight_decay: 0.0005
  max_epochs: 10  # Match reference (was using 50)
  early_stop_patience: 10

output_dir:
device: "cpu"
seed: 42
log_interval: 10  # Log every N batches

